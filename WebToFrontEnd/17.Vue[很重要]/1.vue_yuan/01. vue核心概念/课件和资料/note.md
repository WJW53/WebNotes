## ES6知识补充

- 速写属性
- 速写方法
- 箭头函数
- 模板字符串

## vue实例

通过`new Vue({...})`创建的对象

## 注入

配置对象中的部分内容会被提取到vue实例中：

- data
- methods
- props
- computed

## 注入的目的：

1. 完成数据响应式

vue是怎么知道数据被更改了？

**vue2.0是通过Object.defineProperty()完成了数据响应式**

- defineProperty的缺陷：
   - `无法完成 属性的新增/删除 的响应式`

**vue3.0是通过ES6: Class Proxy完成的数据响应式**


2. 绑定this 指向 vue实例


## 虚拟DOM树

为了提高渲染效率,vue会把模板编译为虚拟DOM树,然后再生成真实的DOM

**当数据更改时，将重新编译成虚拟DOM树，然后对前后两棵树进行比对，仅将差异部分反映到真实DOM，这样即可最小程度的改动真实DOM，提升页面效率**

因此，对于vue而言，提升效率重点着眼于两个方面：

1. 减少新的虚拟DOM的生成
2. 保证对比之后，只有必要的节点有变化

vue提供了多种方式生成虚拟DOM树：

1. 在挂载的元素内部直接书写，此时将使用元素的outerHTML作为模板
2. 在template配置中书写
3. 在render配置中用函数直接创建虚拟节点树，此时，完全脱离模板，将省略编译步骤
   - 其实内部最终都是转为第三种
```js
render(h){
   return h("div",[h("h1",this.title),h("p","asdfsadf")]);
}
```

**这些步骤从上到下，优先级逐渐提升，只能选择其中一种**

`注意：虚拟节点树必须是单根的(diff算法决定的)，所以template必须单根`


## 挂载

**让vue实例控制网页中某个区域的过程，称之为挂载**

挂载的方式：

1. 通过`el:"css选择器"`进行配置
2. 通过`vue实例.$mount("css选择器")`进行配置

## 模板

被vue实例控制的页面片段

1. **模板的作用是什么？**

   **为了提高渲染效率**，vue会把模板编译成为虚拟DOM树（VNode），然后再生成真实的DOM

   <img src="http://mdrs.yuanjin.tech/img/image-20200512140602250.png" alt="image-20200512140602250" style="zoom:50%;" />

2. **模板书写到哪？**

   1. 在挂在的元素内部直接书写
   2. 在`template`配置中书写
   3. 在`render`配置中用函数创建

3. **模板中写什么？**

   1. 静态内容
   2. 插值：`{{JS表达式}}`，`mustache`语法
   3. 指令
      1. `v-html`：绑定元素的`innerHTML`
      2. `v-bind:属性名`：绑定属性
      3. `v-on:事件名`：绑定事件
      4. `v-if`：判断元素是否需要渲染
      5. `v-show`：判断元素是否应该显示
      6. `v-for`：用于循环生成元素
      7. `v-bind:key`：用于帮助在重新渲染时元素的比对，通常和`v-for`配合使用，以提高渲染效率
      8. `v-model`：语法糖，用于实现双向绑定，实际上，是自动绑定了value属性值，和注册了`input`事件

4. **模板中的代码环境**

**模板中所有的JS代码,它的环境均为`vue实例`,例如`{{title}}`,结果相当于`vue实例.title`**

## 配置对象

1. `data`：数据
2. `template`：字符串，配置模板
3. `el`：配置挂载的区域
4. `methods`：配置方法
5. `computed`：配置计算属性



计算属性和方法的区别：

1. 计算属性使用时，是当成属性使用，而方法是需要调用的
2. 计算属性会进行缓存，如果依赖不变，则直接使用缓存结果，不会重新计算
3. 计算属性可以当成属性赋值