# Node的模块化细节

## 模块的查找

1. 绝对路径
2. 相对路径./ 或 ../开头
    - 1.相对于当前模块
    - 2.转换为绝对路径
    - 3.加载模块

3. 相对路径
    - 1.先检查是否是内置模块,如：fs、path等
    - 2.检查当前目录中的node_modules
    - 3.检查上级目录中的node_modules
    - 4.转换为绝对路径
    - 5.加载模块

4. 关于后缀名
    - 如果不提供后缀名, 则自动补全
    - `顺序为: js、json、node、mjs`


5. 关于文件名
    - **如果仅提供目录, 不提供文件名, 则自动寻找该目录中的index.js**
    - package.json中的main字段
        - 表示包的默认入口
        - 导入或执行包时若仅提供目录, 则使用main补全入口
        - 默认值为index.js


## module对象

记录了当前模块的各种信息

## require函数

require.resolve("相对路径");//返回它的入口模块的绝对路径


`当执行一个模块或使用require时, 会将模块放置在一个函数环境中`

## 面试题

**总之先记着一点, CommonJS模块化模块最后导出的是module.exports所指向的对象**
