<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <p><input type="file" id="file1" name="file" /></p>
    <input type="button" value="上传" />
    <p><img id="img1" alt="上传成功啦" src="" /></p>

    <!-- <p>啊</p>
    <img style="width: 100 ;height:100"  src="https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=3792021707,2623597476&fm=15&gp=0.jpg" alt="">
    <img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fku.90sjimg.com%2Felement_origin_min_pic%2F18%2F03%2F30%2F40f7ff9cb296c65f24cc865782d7d8fd.jpg&refer=http%3A%2F%2Fku.90sjimg.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1611480958&t=f668f0ed2ce2edaefa2e012221169c43" alt=""> -->

    <script src="./jquery-3.4.1.js"></script>
    <script src="./ajaxfileupload.js"></script>

    <script>
        $(function () {
            $(":button").click(function () {
                ajaxFileUpload();
            })
        })
        function ajaxFileUpload() {
            $.ajaxFileUpload
            (
                {
                    url: 'http://29s13l8324.wicp.vip/up_photo', //用于文件上传的服务器端请求地址
                    // url: 'http://29s13l8324.wicp.vip/123.jpg', //用于文件上传的服务器端请求地址
                    type: 'post',
                    secureuri: false, //是否需要安全协议，一般设置为false
                    fileElementId: 'file1', //文件上传域的ID
                    contenType: 'multipart/form-data',
                    dataType: 'json', //返回值类型 一般设置为json
                    //不知道咋回事儿 还是有问题,进入了error的回调函数里
                    success: function (data)  //服务器成功响应处理函数
                    {
                        console.log(data);
                        console.log("success");
                        $("#img1").attr("src", data.imgurl);
                        if (typeof (data.error) != 'undefined') {
                            if (data.error != '') {
                                alert(data.error);
                            } else {
                                alert(data.msg);
                            }
                        }
                    },
                    error: function (data, status, e)//服务器响应失败处理函数
                    {
                        console.log("error!");
                        alert(e);
                    }
                }
            )
            return false;
        }
    </script>
</body>
</html>