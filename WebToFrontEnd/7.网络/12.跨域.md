# 如何跨域请求

**跨域发生在  浏览器的接收到之后   才能判定为是否跨域**

## 什么叫跨域访问资源


### 哪些东西属于资源?
1. *JS文件算吗? -- JS文件肯定是算资源的,但是JS文件这种资源是允许被跨域请求的*
2. CSS文件、jpg、png、MP4、MP3等,都是允许被跨域请求的
3. 含src属性的资源都是可以被跨域请求的,含href属性的大部分资源也可以被跨域请求


### 哪些资源算跨域请求的资源

1. 后端接口的数据
2. 其他域的cookie
3. 其他域的缓存

- 什么是其他的域

页面本身: 有协议(http/https), 域名, 端口
要请求的数据: https://www.baidu.com
    不写端口号,默认就是80,即  https://www.baidu.com

**协议,域名,端口这三个,有任意一个不一样,就算跨域**


### 跨域这个行为,发生在哪里?
答:
1. 即使跨域了(协议/域名/端口号有不一样的),请求也可以发出
2. 服务器端也是可以接收的
3. 服务器端也是可以正常处理的
4. 服务器端也是可以正常返回数据的
5. 浏览器也能接收到这些数据
6. **浏览器拦截: 但是,接收到之后,发现当前页面的域和请求的域不同,所以判定为跨域**
7. 我们的代码在这里等着结果呢,但是因为浏览器判定跨域了,所以不会把结果传递给我们的代码

虽然跨域了,但是我们依然需要这个数据,怎么办?


### 解决跨域问题

假设跨域访问百度

1. (别人的)后端配合我们进行跨域
    pan.baidu.com  -->  zhidao.baidu.com
    (1) JSONP(正常的情况,返回的数据都是JSON格式,JSONP是一种特殊的格式)
    (2) 后端设置Access-Control-Allow-Origin属性以支持跨域


2. 后端不配合我们进行跨域
    (3) 利用iframe标签(只能显示,不能用本地JS控制)
    (4) 通过(自己的)后端代理(得学了Node.js才能明白,聊天机器人实战讲解)
