<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <input type="text" id="inp">
    <script src="./deepClone.js"></script>
    <script>
        var personArr = [{
            name: '王xxdf',
            des: '颈椎不好'
        }, {
            name: '王23d',
            des: 'adsf'
        }, {
            name: '刘1',
            des: 'what'
        }, {
            name: '刘2',
            des: 'qqq'
        }, {
            name: '吴经纬',
            des: 'Fighting!'
        }, {
            name: '吴寞惘',
            des: 'Myson'
        }, {
            name: '马佳星',
            des: 'handsome'
        }, {
            name: '姚浩',
            des: 'My brother'
        }, {
            name: '董xx',
            des: 'cute'
        }];

        var oInp = document.getElementById('inp');
        var newArr;
        oInp.oninput = function(){
            newArr = filterByText(this.value,personArr);//过滤信息
            console.log(newArr);
        }

        function filterByText(text,arr){
            var newArr = [];
            for(var i = 0;i<arr.length;i++){//找到了就加进来,没找到就啥也不干
                //arr[i].name.indexOf(text) != -1 ? newArr.push(arr[i]) : '';
                ////其实这里应该用deepClone才能完成真正好使
                ////不然一改变newArr里面的对象的属性,那原先的personArr里的属性也会跟着改变
                arr[i].name.indexOf(text) != -1 ? newArr.push(deepClone(arr[i])) : '';
                //这样就OK了,我把deepClone引入了
            }
            return newArr;
        }
        
        personArr[personArr.length] = {name:'吴经纬',des:'permanent'};

    </script>
</body>

</html>