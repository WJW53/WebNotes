<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script src="./MyPromise_2.js"></script>
    <script>
        let p = Promise.resolve(4);
        new Promise((resolve) => {
            console.log(0);
            // resolve(Promise.resolve(4));
            // resolve(p);
            ////这三种写法等价
            Promise.resolve().then(()=>{
                p.then(resolve);//这里才是最终的resolve
            });
        }).then((res) => {
            console.log(res);
        }).then(() => {
            console.log(7);
        }).then(() => {
            console.log(8);
        });

        new Promise((resolve) => {
            console.log(1);
            resolve();
        }).then(() => {
            console.log(2);
        }).then(() => {
            console.log(3);
        }).then(() => {
            console.log(5);
        }).then(() => {
            console.log(6);
        }).then((res) => {
            console.log(9);
        });
        //0 1 2 3 4 5 7 6 8 9


        
        // let p = Promise.resolve(1);
        // let p3 = Promise.resolve(p);
        // //Promise.resolve(thenable) 等价于如下代码
        // let p4 = new Promise(resolve => {
        //     Promise.resolve().then(() => {
        //         p.then(resolve);
        //     });
        // });
        // p4.then(() => console.log('promise1'))
        //     .then(() => console.log('promise2'));
        // p3.then(() => console.log('promise3'))
        //     .then(() => console.log('promise4'))
        //     .then(() => console.log('promise5'));

        //3 4 1 5 2

        // 作者：小编
        // 链接：https://juejin.cn/post/6936515826514149389
        // 来源：掘金
        // 著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
    </script>
</body>

</html>